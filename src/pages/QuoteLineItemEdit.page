<apex:page standardController="QuoteLineItem" extensions="QuoteLineItemEditController">
	<script type="text/javascript">
        
        //Function is used to get splash status bar when server side call is going on
        function startSplash() {
            var divObj = document.getElementById('splashDiv');
            //var msgSplash =document.getElementById('waitMsg');
            divObj.style.display='table-cell';
               
        }
            
        //Function will make the splash status to be stopped.    
        function endSplash() {            
            document.getElementById('splashDiv').style.display='none';
        }
         
    </script>
	<apex:sectionHeader title="Quote Line Item Edit" subtitle="{!qli.PricebookEntry.Product2.Name}"/>
	<apex:form id="formId">
		<apex:outputPanel id="errorPanel" >
            <apex:pageMessages />
        </apex:outputPanel>
        <apex:actionStatus id="splashStatus" onstart="startSplash()" onstop="endSplash()"/>
		<apex:pageBlock id="pgBlk" title="Quote Line Item Edit" mode="edit">
			<apex:pageBlockButtons >
				<apex:commandButton value="Save" action="{!SaveOLI}"/>
				<apex:commandButton value="Cancel" action="{!cancel}"/>
			</apex:pageBlockButtons>
			<apex:pageBlockSection id="pgBlkSec" title="Quote Line Item Information" columns="2">
				<apex:outputField value="{!qli.LineNumber}" />
				<apex:outputField value="{!qli.Subtotal}" />
				<apex:pageBlockSectionitem >
					<apex:outputLabel value="Quote Name" />
					<apex:outputText value="{!qli.Quote.Name}" />
				</apex:pageBlockSectionitem>
				<apex:inputField value="{!qli.Discount}" />
				<apex:pageBlockSectionitem id="prodNameSecItem">
					<apex:outputLabel value="Product" />
					<apex:outputText id="prodname" value="{!productName}" />
				</apex:pageBlockSectionitem>
				<apex:outputField value="{!qli.TotalPrice}" />
				<apex:pageBlockSectionitem id="prodCodeSecItem">
					<apex:outputLabel value="Product Code" />
					<apex:outputText id="prodCode" value="{!prodCode}" />
				</apex:pageBlockSectionitem>
				<apex:inputField value="{!qli.Size__c}" />
				<apex:outputField value="{!qli.ListPrice}" />
				<apex:inputField value="{!qli.Style_Description__c}" />
				<apex:inputField value="{!qli.UnitPrice}" required="true"/>
				<apex:inputField value="{!qli.Bk__c}" />
				<apex:inputField value="{!qli.Quantity}" />
				<apex:pageBlockSectionitem rendered="{!isCustomProduct}">
					<apex:outputLabel value="Color Description" />
					<apex:selectList value="{!qli.Color_Description__c}" size="1">
                        <apex:selectOptions value="{!colorDescOptions}" />
                        <apex:actionSupport event="onchange" action="{!fetchProductCode}" reRender="prodname,prodCode,errorPanel" status="splashStatus"></apex:actionSupport>
                    </apex:selectList>
				</apex:pageBlockSectionitem>
				<apex:inputField value="{!qli.Color_Description__c}" rendered="{!NOT(isCustomProduct)}"/>
				<apex:inputField value="{!qli.Description}" style="width:250px"/>
				<apex:inputField value="{!qli.Unit_of_Measure__c}" />
			</apex:pageBlockSection>
		</apex:pageBlock>
	</apex:form>
    <div id="splashDiv" style="display:none; position:absolute; left:50%; top:50%; z-index: 100;"><img src="/img/loading.gif" /></div>
</apex:page>