<apex:page controller="ConfidentialAttachAndNotesController" tabStyle="Confidential_Attachment_and_Note__c" action="{!saveCon}">
    <apex:sectionHeader title="Confidential Attachment and Note Edit" subtitle="New Confidential Attachment and Note"/>
    <apex:form >
        <apex:pageBlock mode="Edit" tabStyle="Confidential_Attachment_and_Note__c" title="Confidential Attachment and Note Edit">
            <apex:pagemessage severity="error" rendered="{!showmessage}" id="err1" strength="3" escape="false" summary="Error: Invalid Data.<br> Review all error messages below to correct your data.<br> This case has been closed greater than 30 days ago, you cannot add additional comments. Please submit a new case."></apex:pagemessage> 
            <apex:PageMessages rendered="{!showmessage1}">
            
            </apex:PageMessages>
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton value="{!buttonText}" action="{!doSave}"/>               
                <apex:commandButton value="Cancel" action="{!doCancel}" immediate="true"/>
            </apex:pageBlockButtons>
            <apex:pageBlockSection title="Information" collapsible="false">
                <apex:outputField value="{!noteAttachRecord.Case__c}" />
               
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Owner"></apex:outputLabel>
                    <apex:outputLabel value="{!$User.FirstName} {!$User.LastName}"></apex:outputLabel>           
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Type"></apex:outputLabel>
                    <apex:selectList value="{!selType}" multiselect="false" size="1">
                        <apex:selectOption itemLabel="Attachment" itemValue="Attachment" />
                        <apex:selectOption itemLabel="Note" itemValue="Note" />
                        <apex:actionSupport action="{!renderAction}" event="onchange" />                        
                    </apex:selectList>
                </apex:pageBlockSectionItem>
                <apex:outputText value=""/>
                <apex:inputField value="{!noteAttachRecord.Comments__c}" /> 
            </apex:pageBlockSection>
             
            <apex:outputPanel id="notesection">
                <apex:pageBlockSection title="Notes Information" collapsible="false" columns="1" rendered="{!IF(selType == 'Note', true, false)}" > 
                    <apex:inputField value="{!conNote.IsPrivate}"/>
                    <apex:pageBlockSectionItem >
                        <apex:outputLabel value="Title"></apex:outputLabel>
                        <apex:outputPanel styleClass="requiredInput" layout="block">
                        <div class="requiredBlock"></div>
                        <apex:inputText value="{!conNote.Title}" size="60" maxlength="80" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>    
                     <apex:pageBlockSectionItem >
                        <apex:outputLabel value="Body"></apex:outputLabel>
                        <apex:inputTextarea value="{!conNote.Body}" cols="80" rows="18"/>
                    </apex:pageBlockSectionItem>         
                </apex:pageBlockSection> 
            </apex:outputPanel>
            
           <apex:outputPanel id="attsection">
                <apex:pageBlockSection title="Attachment Information" collapsible="false" columns="1" rendered="{!IF(selType == 'Attachment', true, false)}" >
                    
                         
                        <apex:panelGrid columns="1">       
                            <apex:outputLabel value="1. Select the File" style="font-weight:bold;"></apex:outputLabel>
                            <apex:outputLabel value="Type the path of the file or click the Browse button to find the file."></apex:outputLabel>         
                            <apex:inputFile value="{!conAttach.body}" fileName="{!conAttach.Name}" size="{!conAttach.BodyLength}"></apex:inputFile>  
                        </apex:panelGrid>
                         
                        <apex:panelGrid columns="1">      
                            <apex:outputLabel value="2. Click the 'Attach' File button" style="font-weight:bold;"></apex:outputLabel>
                            <apex:outputLabel value="Repeat steps 1 and 2 to attach multiple files." />  
                            <apex:outputLabel value="( When the upload is complete the file information will appear below. )" />         
                            <apex:commandButton value="Attach File" action="{!saveAttachment}"/>  
                        </apex:panelGrid>  
                        <br/>
                        
                        <apex:pageBlockSection title="You have just uploaded the following file" columns="1"  collapsible="false" rendered="{!IF(fileName != '', true,false)}">
                              <apex:pageBlockSectionItem >
                                <apex:outputLabel value="File Name"></apex:outputLabel>
                                <apex:outputText value="{!fileName}" />
                            </apex:pageBlockSectionItem>  
                             
                        </apex:pageBlockSection>
                        <!-- apex:panelGrid columns="1">      
                            <apex:outputLabel value="3. Click the Done button to return to the previous page." style="font-weight:bold;"></apex:outputLabel>
                            <apex:outputLabel value="   ( This will cancel an in-progress upload. )" />
                            <apex:commandButton value="Done" />  
                        </apex:panelGrid-->
                                 
                </apex:pageBlockSection>
           </apex:outputPanel>                 
        </apex:pageBlock> 
        
    </apex:form>
</apex:page>